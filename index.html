<!doctype html>

<html>

<head>

  <link href='index.css' type='text/css' rel='stylesheet' />

  <script src='glMatrix-0.9.5.min.js' type='text/javascript'></script>

  <script id='shader-fs' type='x-shader/x-fragment'>

  precision mediump float;
  varying vec4 vColor;
  varying vec3 lighting;

  void main(void) {
      gl_FragColor = vec4(vColor.rgb * lighting, vColor.a);
  }

  </script>

  <script id='shader-vs' type='x-shader/x-vertex'>

  attribute vec3 aVertexPosition;
  attribute vec4 aVertexColor;
  attribute vec3 aVertexNormal;
  uniform mat4 uMVMatrix;
  uniform mat4 uPMatrix;
  uniform mat3 uNMatrix;
  varying vec4 vColor;
  varying vec3 lighting;

  void main(void) {

      vec3 ambientLight = vec3(0.5, 0.5, 0.5);
      vec3 directionalLightColor = vec3(0.5, 0.5, 0.5);
      vec3 directionalVector = vec3(1, -1, 0);

      vec3 transformedNormal = uNMatrix * aVertexNormal;
      highp float directional = max(dot(transformedNormal.xyz, directionalVector), 0.0);

      vColor = aVertexColor;
      lighting = ambientLight + (directionalLightColor * directional);
      gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);

  }

  </script>

  <script src='index.js' type='text/javascript'></script>

</head>

<body onload='webGLStart();'>

  <canvas id='canvas' width="1000" height="500"></canvas>

</body>

</html>
